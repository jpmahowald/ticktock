---
# defaults file for ticktock

# Pool names have multiple DNS records
# NTP.org has IPv6 records on 2  
#ticktockpool: 2.pool.ntp.org
# CloudFlare has many POPs and may be low latency
ticktockpool: time.cloudflare.com

ticktockdefaults:
  chrony:
    conf: /etc/chrony.conf
    service: chronyd
  ntp:
    conf: /etc/ntp.conf
    service: ntp

ticktocknotdefaults:
  CentOS:
    impl: "{{ (ansible_distribution_major_version | int > 6) | ternary('chrony','ntp') }}"
  Debian:
    impl: "{{ (ansible_distribution_major_version | int > 9) | ternary('chrony','ntp') }}"
    chrony:
      conf: /etc/chrony/chrony.conf
  FreeBSD:
    ntp:
      service: ntpd
  RedHat:
    impl: "{{ (ansible_distribution_major_version | int > 6) | ternary('chrony','ntp') }}"
  SLES:
    impl: "{{ (ansible_distribution_major_version | int > 14) | ternary('chrony','ntp') }}"
  Ubuntu:
    impl: "{{ (ansible_distribution_major_version | int > 17) | ternary('chrony','ntp') }}"

# Shorter vars to access defaults
# Try distro specific overrides first
#
# Implementation can be ntp or chrony
# NTP reference implmentation runs on the most platforms
ticktockimpl: "{{ ticktocknotdefaults[ansible_distribution]['impl'] | default('ntp') }}"
ticktockservice: "{{ ticktocknotdefaults[ansible_os_family][ticktockimpl]['service'] | default( ticktockdefaults[ticktockimpl]['service'] ) }}"
ticktockconf: "{{ ticktocknotdefaults[ansible_os_family][ticktockimpl]['conf'] | default( ticktockdefaults[ticktockimpl]['conf'] ) }}"
